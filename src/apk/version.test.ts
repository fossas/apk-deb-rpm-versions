import { describe, expect, test } from "vitest";
import { Version, makeInvalid, parseLetter } from "./version";

const LESS = -1;
const EQUAL = 0;
const GREATER = 1;

const repeat = (num: number) => {
  let s = "";
  while (num > 0) {
    s += `.${num}`;
    num--;
  }

  return s.substring(1);
};

describe("Verison", () => {
  describe("isValid", () => {
    [
      "1",
      "1.1",
      "1.1.1",
      "1.1.1-r1",
      "1.1.1-r1_alpha",
      "1.1.1-r1_alpha1",
      repeat(1000),
    ].forEach((c) => {
      test(`isValid ${c} = true`, () => {
        expect(Version.isValid(c)).toBe(true);
      });
    });

    ["", "a", "1.0!", repeat(1001)].forEach((c) => {
      test(`isValid '${c}' = false`, () => {
        const vv = Version.parse(c);
        expect(Version.isValid(c)).toBe(false);
      });
    });
  });

  describe("compare", () => {
    cases.forEach((c) => {
      test(`compares ${c.lhs} ${c.op} ${c.rhs}`, () => {
        const lhs = Version.parse(c.lhs);
        const rhs = Version.parse(c.rhs);
        expect(lhs.compare(rhs)).toBe(opToVal(c.op));

        if (c.op === ">") {
          expect(lhs.greaterThan(rhs)).toBe(true);
        }
        if (c.op === "<") {
          expect(lhs.lessThan(rhs)).toBe(true);
        }
        if (c.op === "=") {
          expect(lhs.equal(rhs)).toBe(true);
        }
      });
    });
  });
});

describe("extra", () => {
  test("makeInvalid", () => {
    expect(makeInvalid("")).toStrictEqual({
      kind: "invalid",
      value: null,
      rest: "",
    });
  });
  test("parseLetter", () => {
    expect(parseLetter("!")).toStrictEqual({
      kind: "invalid",
      value: null,
      rest: "!",
    });
  });
});

const makeCase = (lhs, op, rhs) => {
  return {
    lhs,
    op,
    rhs,
  };
};

const opToVal = (v: string) => {
  if (v === ">") return GREATER;
  if (v === "<") return LESS;
  if (v === "=") return EQUAL;
  throw new Error(`unexpected operator: ${v}`);
};

const cases = [
  makeCase("2.34", ">", "0.1.0_alpha"),
  makeCase("23_foo", ">", "4_beta"), // invalid. but handled
  makeCase("23_foo", ">", "23_alpha"),
  makeCase("23_alpha", "<", "23_foo"),
  makeCase("23_alpha", "<", "23_beta"),
  makeCase("23_alpha", "<", "23_beta"),
  makeCase("23_foo1", "=", "23_foo1"), // invalid. but handled
  // makeCase("23_foo1", "<", "23_foo2"), // invalid. but handled
  makeCase("1.0", "<", "1.0bc"), // invalid. do string sort
  makeCase("0.1.0_alpha", "=", "0.1.0_alpha"),
  makeCase("0.1.0_alpha", "<", "0.1.3_alpha"),
  makeCase("0.1.3_alpha", ">", "0.1.0_alpha"),
  makeCase("0.1.0_alpha2", ">", "0.1.0_alpha"),
  makeCase("0.1.0_alpha", "<", "2.2.39-r1"),
  makeCase("2.2.39-r1", ">", "1.0.4-r3"),
  makeCase("1.0.4-r3", "<", "1.0.4-r4"),
  makeCase("1.0.4-r4", "<", "1.6"),
  makeCase("1.6", ">", "1.0.2"),
  makeCase("1.0.2", ">", "0.7-r1"),
  makeCase("0.7-r1", "<", "1.0.0"),
  makeCase("1.0.0", "<", "1.0.1"),
  makeCase("1.0.1", "<", "1.1"),
  makeCase("1.1", ">", "1.1_alpha1"),
  makeCase("1.1_alpha1", "<", "1.2.1"),
  makeCase("1.2.1", ">", "1.2"),
  makeCase("1.2", "<", "1.3_alpha"),
  makeCase("1.3_alpha", "<", "1.3_alpha2"),
  makeCase("1.3_alpha2", "<", "1.3_alpha3"),
  makeCase("1.3_alpha8", ">", "0.6.0"),
  makeCase("0.6.0", "<", "0.6.1"),
  makeCase("0.6.1", "<", "0.7.0"),
  makeCase("0.7.0", "<", "0.8_beta1"),
  makeCase("0.8_beta1", "<", "0.8_beta2"),
  makeCase("0.8_beta4", "<", "4.8-r1"),
  makeCase("4.8-r1", ">", "3.10.18-r1"),
  makeCase("3.10.18-r1", ">", "2.3.0b-r1"),
  makeCase("2.3.0b-r1", "<", "2.3.0b-r2"),
  makeCase("2.3.0b-r2", "<", "2.3.0b-r3"),
  makeCase("2.3.0b-r3", "<", "2.3.0b-r4"),
  makeCase("2.3.0b-r4", ">", "0.12.1"),
  makeCase("0.12.1", "<", "0.12.2"),
  makeCase("0.12.2", "<", "0.12.3"),
  makeCase("0.12.3", ">", "0.12"),
  makeCase("0.12", "<", "0.13_beta1"),
  makeCase("0.13_beta1", "<", "0.13_beta2"),
  makeCase("0.13_beta2", "<", "0.13_beta3"),
  makeCase("0.13_beta3", "<", "0.13_beta4"),
  makeCase("0.13_beta4", "<", "0.13_beta5"),
  makeCase("0.13_beta5", ">", "0.9.12"),
  makeCase("0.9.12", "<", "0.9.13"),
  makeCase("0.9.13", ">", "0.9.12"),
  makeCase("0.9.12", "<", "0.9.13"),
  makeCase("0.9.13", ">", "0.0.16"),
  makeCase("0.0.16", "<", "0.6"),
  makeCase("0.6", "<", "2.1.13-r3"),
  makeCase("2.1.13-r3", "<", "2.1.15-r2"),
  makeCase("2.1.15-r2", "<", "2.1.15-r3"),
  makeCase("2.1.15-r3", ">", "1.2.11"),
  makeCase("1.2.11", "<", "1.2.12.1"),
  makeCase("1.2.12.1", "<", "1.2.13"),
  makeCase("1.2.13", "<", "1.2.14-r1"),
  makeCase("1.2.14-r1", ">", "0.7.1"),
  makeCase("0.7.1", ">", "0.5.4"),
  makeCase("0.5.4", "<", "0.7.0"),
  makeCase("0.7.0", "<", "1.2.13"),
  makeCase("1.2.13", ">", "1.0.8"),
  makeCase("1.0.8", "<", "1.2.1"),
  makeCase("1.2.1", ">", "0.7-r1"),
  makeCase("0.7-r1", "<", "2.4.32"),
  makeCase("2.4.32", "<", "2.8-r4"),
  makeCase("2.8-r4", ">", "0.9.6"),
  makeCase("0.9.6", ">", "0.2.0-r1"),
  makeCase("0.2.0-r1", "=", "0.2.0-r1"),
  makeCase("0.2.0-r1", "<", "3.1_p16"),
  makeCase("3.1_p16", "<", "3.1_p17"),
  makeCase("3.1_p17", ">", "1.06-r6"),
  makeCase("1.06-r6", "<", "006"),
  makeCase("006", ">", "1.0.0"),
  makeCase("1.0.0", "<", "1.2.2-r1"),
  makeCase("1.2.2-r1", ">", "1.2.2"),
  makeCase("1.2.2", ">", "0.3-r1"),
  makeCase("0.3-r1", "<", "9.3.2-r4"),
  makeCase("9.3.2-r4", "<", "9.3.4-r2"),
  makeCase("9.3.4-r2", ">", "9.3.4"),
  makeCase("9.3.4", ">", "9.3.2"),
  makeCase("9.3.2", "<", "9.3.4"),
  makeCase("9.3.4", ">", "1.1.3"),
  makeCase("1.1.3", "<", "2.16.1-r3"),
  makeCase("2.16.1-r3", "=", "2.16.1-r3"),
  makeCase("2.16.1-r3", ">", "2.1.0-r2"),
  makeCase("2.1.0-r2", "<", "2.9.3-r1"),
  makeCase("2.9.3-r1", ">", "0.9-r1"),
  makeCase("0.9-r1", ">", "0.8-r1"),
  makeCase("0.8-r1", "<", "1.0.6-r3"),
  makeCase("1.0.6-r3", ">", "0.11"),
  makeCase("0.11", "<", "0.12"),
  makeCase("0.12", "<", "1.2.1-r1"),
  makeCase("1.2.1-r1", "<", "1.2.2.1"),
  makeCase("1.2.2.1", "<", "1.4.1-r1"),
  makeCase("1.4.1-r1", "<", "1.4.1-r2"),
  makeCase("1.4.1-r2", ">", "1.2.2"),
  makeCase("1.2.2", "<", "1.3"),
  makeCase("1.3", ">", "1.0.3-r6"),
  makeCase("1.0.3-r6", "<", "1.0.4"),
  makeCase("1.0.4", "<", "2.59"),
  makeCase("2.59", "<", "20050718-r1"),
  makeCase("20050718-r1", "<", "20050718-r2"),
  makeCase("20050718-r2", ">", "3.9.8-r5"),
  makeCase("3.9.8-r5", ">", "2.01.01_alpha10"),
  makeCase("2.01.01_alpha10", ">", "0.94"),
  makeCase("0.94", "<", "1.0"),
  makeCase("1.0", ">", "0.99.3.20040818"),
  makeCase("0.99.3.20040818", ">", "0.7"),
  makeCase("0.7", "<", "1.21-r1"),
  makeCase("1.21-r1", ">", "0.13"),
  makeCase("0.13", "<", "0.90.1-r1"),
  makeCase("0.90.1-r1", ">", "0.10.2"),
  makeCase("0.10.2", "<", "0.10.3"),
  makeCase("0.10.3", "<", "1.6"),
  makeCase("1.6", "<", "1.39"),
  makeCase("1.39", ">", "1.00_beta2"),
  makeCase("1.00_beta2", ">", "0.9.2"),
  makeCase("0.9.2", "<", "5.94-r1"),
  makeCase("5.94-r1", "<", "6.4"),
  makeCase("6.4", ">", "2.6-r5"),
  makeCase("2.6-r5", ">", "1.4"),
  makeCase("1.4", "<", "2.8.9-r1"),
  makeCase("2.8.9-r1", ">", "2.8.9"),
  makeCase("2.8.9", ">", "1.1"),
  makeCase("1.1", ">", "1.0.3-r2"),
  makeCase("1.0.3-r2", "<", "1.3.4-r3"),
  makeCase("1.3.4-r3", "<", "2.2"),
  makeCase("2.2", ">", "1.2.6"),
  makeCase("1.2.6", "<", "7.15.1-r1"),
  makeCase("7.15.1-r1", ">", "1.02"),
  makeCase("1.02", "<", "1.03-r1"),
  makeCase("1.03-r1", "<", "1.12.12-r2"),
  makeCase("1.12.12-r2", "<", "2.8.0.6-r1"),
  makeCase("2.8.0.6-r1", ">", "0.5.2.7"),
  makeCase("0.5.2.7", "<", "4.2.52_p2-r1"),
  makeCase("4.2.52_p2-r1", "<", "4.2.52_p4-r2"),
  makeCase("4.2.52_p4-r2", ">", "1.02.07"),
  makeCase("1.02.07", "<", "1.02.10-r1"),
  makeCase("1.02.10-r1", "<", "3.0.3-r9"),
  makeCase("3.0.3-r9", ">", "2.0.5-r1"),
  makeCase("2.0.5-r1", "<", "4.5"),
  makeCase("4.5", ">", "2.8.7-r1"),
  makeCase("2.8.7-r1", ">", "1.0.5"),
  makeCase("1.0.5", "<", "8"),
  makeCase("8", "<", "9"),
  makeCase("9", ">", "2.18.3-r10"),
  makeCase("2.18.3-r10", ">", "1.05-r18"),
  makeCase("1.05-r18", "<", "1.05-r19"),
  makeCase("1.05-r19", "<", "2.2.5"),
  makeCase("2.2.5", "<", "2.8"),
  makeCase("2.8", "<", "2.20.1"),
  makeCase("2.20.1", "<", "2.20.3"),
  makeCase("2.20.3", "<", "2.31"),
  makeCase("2.31", "<", "2.34"),
  makeCase("2.34", "<", "2.38"),
  makeCase("2.38", "<", "20050405"),
  makeCase("20050405", ">", "1.8"),
  makeCase("1.8", "<", "2.11-r1"),
  makeCase("2.11-r1", ">", "2.11"),
  makeCase("2.11", ">", "0.1.6-r3"),
  makeCase("0.1.6-r3", "<", "0.47-r1"),
  makeCase("0.47-r1", "<", "0.49"),
  makeCase("0.49", "<", "3.6.8-r2"),
  makeCase("3.6.8-r2", ">", "1.39"),
  makeCase("1.39", "<", "2.43"),
  makeCase("2.43", ">", "2.0.6-r1"),
  makeCase("2.0.6-r1", ">", "0.2-r6"),
  makeCase("0.2-r6", "<", "0.4"),
  makeCase("0.4", "<", "1.0.0"),
  makeCase("1.0.0", "<", "10-r1"),
  makeCase("10-r1", ">", "4"),
  makeCase("4", ">", "0.7.3-r2"),
  makeCase("0.7.3-r2", ">", "0.7.3"),
  makeCase("0.7.3", "<", "1.95.8"),
  makeCase("1.95.8", ">", "1.1.19"),
  makeCase("1.1.19", ">", "1.1.5"),
  makeCase("1.1.5", "<", "6.3.2-r1"),
  makeCase("6.3.2-r1", "<", "6.3.3"),
  makeCase("6.3.3", ">", "4.17-r1"),
  makeCase("4.17-r1", "<", "4.18"),
  makeCase("4.18", "<", "4.19"),
  makeCase("4.19", ">", "4.3.0"),
  makeCase("4.3.0", "<", "4.3.2-r1"),
  makeCase("4.3.2-r1", ">", "4.3.2"),
  makeCase("4.3.2", ">", "0.68-r3"),
  makeCase("0.68-r3", "<", "1.0.0"),
  makeCase("1.0.0", "<", "1.0.1"),
  makeCase("1.0.1", ">", "1.0.0"),
  makeCase("1.0.0", "=", "1.0.0"),
  makeCase("1.0.0", "<", "1.0.1"),
  makeCase("1.0.1", "<", "2.3.2-r1"),
  makeCase("2.3.2-r1", "<", "2.4.2"),
  makeCase("2.4.2", "<", "20060720"),
  makeCase("20060720", ">", "3.0.20060720"),
  makeCase("3.0.20060720", "<", "20060720"),
  makeCase("20060720", ">", "1.1"),
  makeCase("1.1", "=", "1.1"),
  makeCase("1.1", "<", "1.1.1-r1"),
  makeCase("1.1.1-r1", "<", "1.1.3-r1"),
  makeCase("1.1.3-r1", "<", "1.1.3-r2"),
  makeCase("1.1.3-r2", "<", "2.1.10-r2"),
  makeCase("2.1.10-r2", ">", "0.7.18-r2"),
  makeCase("0.7.18-r2", "<", "0.17-r6"),
  makeCase("0.17-r6", "<", "2.6.1"),
  makeCase("2.6.1", "<", "2.6.3"),
  makeCase("2.6.3", "<", "3.1.5-r2"),
  makeCase("3.1.5-r2", "<", "3.4.6-r1"),
  makeCase("3.4.6-r1", "<", "3.4.6-r2"),
  makeCase("3.4.6-r2", "=", "3.4.6-r2"),
  makeCase("3.4.6-r2", ">", "2.0.33"),
  makeCase("2.0.33", "<", "2.0.34"),
  makeCase("2.0.34", ">", "1.8.3-r2"),
  makeCase("1.8.3-r2", "<", "1.8.3-r3"),
  makeCase("1.8.3-r3", "<", "4.1"),
  makeCase("4.1", "<", "8.54"),
  makeCase("8.54", ">", "4.1.4"),
  makeCase("4.1.4", ">", "1.2.10-r5"),
  makeCase("1.2.10-r5", "<", "4.1.4-r3"),
  makeCase("4.1.4-r3", "=", "4.1.4-r3"),
  makeCase("4.1.4-r3", "<", "4.2.1"),
  makeCase("4.2.1", ">", "4.1.0"),
  makeCase("4.1.0", "<", "8.11"),
  makeCase("8.11", ">", "1.4.4-r1"),
  makeCase("1.4.4-r1", "<", "2.1.9.200602141850"),
  makeCase("2.1.9.200602141850", ">", "1.6"),
  makeCase("1.6", "<", "2.5.1-r8"),
  makeCase("2.5.1-r8", "<", "2.5.1a-r1"),
  makeCase("2.5.1a-r1", ">", "1.19.2-r1"),
  makeCase("1.19.2-r1", ">", "0.97-r2"),
  makeCase("0.97-r2", "<", "0.97-r3"),
  makeCase("0.97-r3", "<", "1.3.5-r10"),
  makeCase("1.3.5-r10", ">", "1.3.5-r8"),
  makeCase("1.3.5-r8", "<", "1.3.5-r9"),
  makeCase("1.3.5-r9", ">", "1.0"),
  makeCase("1.0", "<", "1.1"),
  makeCase("1.1", ">", "0.9.11"),
  makeCase("0.9.11", "<", "0.9.12"),
  makeCase("0.9.12", "<", "0.9.13"),
  makeCase("0.9.13", "<", "0.9.14"),
  makeCase("0.9.14", "<", "0.9.15"),
  makeCase("0.9.15", "<", "0.9.16"),
  makeCase("0.9.16", ">", "0.3-r2"),
  makeCase("0.3-r2", "<", "6.3"),
  makeCase("6.3", "<", "6.6"),
  makeCase("6.6", "<", "6.9"),
  makeCase("6.9", ">", "0.7.2-r3"),
  makeCase("0.7.2-r3", "<", "1.2.10"),
  makeCase("1.2.10", "<", "20040923-r2"),
  makeCase("20040923-r2", ">", "20040401"),
  makeCase("20040401", ">", "2.0.0_rc3-r1"),
  makeCase("2.0.0_rc3-r1", ">", "1.5"),
  makeCase("1.5", "<", "4.4"),
  makeCase("4.4", ">", "1.0.1"),
  makeCase("1.0.1", "<", "2.2.0"),
  makeCase("2.2.0", ">", "1.1.0-r2"),
  makeCase("1.1.0-r2", ">", "0.3"),
  makeCase("0.3", "<", "20020207-r2"),
  makeCase("20020207-r2", ">", "1.31-r2"),
  makeCase("1.31-r2", "<", "3.7"),
  makeCase("3.7", ">", "2.0.1"),
  makeCase("2.0.1", "<", "2.0.2"),
  makeCase("2.0.2", ">", "0.99.163"),
  makeCase("0.99.163", "<", "2.6.15.20060110"),
  makeCase("2.6.15.20060110", "<", "2.6.16.20060323"),
  makeCase("2.6.16.20060323", "<", "2.6.19.20061214"),
  makeCase("2.6.19.20061214", ">", "0.6.2-r1"),
  makeCase("0.6.2-r1", "<", "0.6.3"),
  makeCase("0.6.3", "<", "0.6.5"),
  makeCase("0.6.5", "<", "1.3.5-r1"),
  makeCase("1.3.5-r1", "<", "1.3.5-r4"),
  makeCase("1.3.5-r4", "<", "3.0.0-r2"),
  makeCase("3.0.0-r2", "<", "021109-r3"),
  makeCase("021109-r3", "<", "20060512"),
  makeCase("20060512", ">", "1.24"),
  makeCase("1.24", ">", "0.9.16-r1"),
  makeCase("0.9.16-r1", "<", "3.9_pre20060124"),
  makeCase("3.9_pre20060124", ">", "0.01"),
  makeCase("0.01", "<", "0.06"),
  makeCase("0.06", "<", "1.1.7"),
  makeCase("1.1.7", "<", "6b-r7"),
  makeCase("6b-r7", ">", "1.12-r7"),
  makeCase("1.12-r7", "<", "1.12-r8"),
  makeCase("1.12-r8", ">", "1.1.12"),
  makeCase("1.1.12", "<", "1.1.13"),
  makeCase("1.1.13", ">", "0.3"),
  makeCase("0.3", "<", "0.5"),
  makeCase("0.5", "<", "3.96.1"),
  makeCase("3.96.1", "<", "3.97"),
  makeCase("3.97", ">", "0.10.0-r1"),
  makeCase("0.10.0-r1", ">", "0.10.0"),
  makeCase("0.10.0", "<", "0.10.1_rc1"),
  makeCase("0.10.1_rc1", ">", "0.9.11"),
  makeCase("0.9.11", "<", "394"),
  makeCase("394", ">", "2.31"),
  makeCase("2.31", ">", "1.0.1"),
  makeCase("1.0.1", "=", "1.0.1"),
  makeCase("1.0.1", "<", "1.0.3"),
  makeCase("1.0.3", ">", "1.0.2"),
  makeCase("1.0.2", "=", "1.0.2"),
  makeCase("1.0.2", ">", "1.0.1"),
  makeCase("1.0.1", "=", "1.0.1"),
  makeCase("1.0.1", "<", "1.2.2"),
  makeCase("1.2.2", "<", "2.1.10"),
  makeCase("2.1.10", ">", "1.0.1"),
  makeCase("1.0.1", "<", "1.0.2"),
  makeCase("1.0.2", "<", "3.5.5"),
  makeCase("3.5.5", ">", "1.1.1"),
  makeCase("1.1.1", ">", "0.9.1"),
  makeCase("0.9.1", "<", "1.0.2"),
  makeCase("1.0.2", ">", "1.0.1"),
  makeCase("1.0.1", "<", "1.0.2"),
  makeCase("1.0.2", ">", "1.0.1"),
  makeCase("1.0.1", "=", "1.0.1"),
  makeCase("1.0.1", "<", "1.0.5"),
  makeCase("1.0.5", ">", "0.8.5"),
  makeCase("0.8.5", "<", "0.8.6-r3"),
  makeCase("0.8.6-r3", "<", "2.3.17"),
  makeCase("2.3.17", ">", "1.10-r5"),
  makeCase("1.10-r5", "<", "1.10-r9"),
  makeCase("1.10-r9", "<", "2.0.2"),
  makeCase("2.0.2", ">", "1.1a"),
  makeCase("1.1a", "<", "1.3a"),
  makeCase("1.3a", ">", "1.0.2"),
  makeCase("1.0.2", "<", "1.2.2-r1"),
  makeCase("1.2.2-r1", ">", "1.0-r1"),
  makeCase("1.0-r1", ">", "0.15.1b"),
  makeCase("0.15.1b", "<", "1.0.1"),
  makeCase("1.0.1", "<", "1.06-r1"),
  makeCase("1.06-r1", "<", "1.06-r2"),
  makeCase("1.06-r2", ">", "0.15.1b-r2"),
  makeCase("0.15.1b-r2", ">", "0.15.1b"),
  makeCase("0.15.1b", "<", "2.5.7"),
  makeCase("2.5.7", ">", "1.1.2.1-r1"),
  makeCase("1.1.2.1-r1", ">", "0.0.31"),
  makeCase("0.0.31", "<", "0.0.50"),
  makeCase("0.0.50", ">", "0.0.16"),
  makeCase("0.0.16", "<", "0.0.25"),
  makeCase("0.0.25", "<", "0.17"),
  makeCase("0.17", ">", "0.5.0"),
  makeCase("0.5.0", "<", "1.1.2"),
  makeCase("1.1.2", "<", "1.1.3"),
  makeCase("1.1.3", "<", "1.1.20"),
  makeCase("1.1.20", ">", "0.9.4"),
  makeCase("0.9.4", "<", "0.9.5"),
  makeCase("0.9.5", "<", "6.3"),
  makeCase("6.3", "<", "6.6"),
  makeCase("6.6", ">", "6.3"),
  makeCase("6.3", "<", "6.6"),
  makeCase("6.6", ">", "1.2.12-r1"),
  makeCase("1.2.12-r1", "<", "1.2.13"),
  makeCase("1.2.13", "<", "1.2.14"),
  makeCase("1.2.14", "<", "1.2.15"),
  makeCase("1.2.15", "<", "8.0.12"),
  makeCase("8.0.12", ">", "8.0.9"),
  makeCase("8.0.9", ">", "1.2.3-r1"),
  makeCase("1.2.3-r1", "<", "1.2.4-r1"),
  makeCase("1.2.4-r1", ">", "0.1"),
  makeCase("0.1", "<", "0.3.5"),
  makeCase("0.3.5", "<", "1.5.22"),
  makeCase("1.5.22", ">", "0.1.11"),
  makeCase("0.1.11", "<", "0.1.12"),
  makeCase("0.1.12", "<", "1.1.4.1"),
  makeCase("1.1.4.1", ">", "1.1.0"),
  makeCase("1.1.0", "<", "1.1.2"),
  makeCase("1.1.2", ">", "1.0.3"),
  makeCase("1.0.3", ">", "1.0.2"),
  makeCase("1.0.2", "<", "2.6.26"),
  makeCase("2.6.26", "<", "2.6.27"),
  makeCase("2.6.27", ">", "1.1.17"),
  makeCase("1.1.17", "<", "1.4.11"),
  makeCase("1.4.11", "<", "22.7-r1"),
  makeCase("22.7-r1", "<", "22.7.3-r1"),
  makeCase("22.7.3-r1", ">", "22.7"),
  makeCase("22.7", ">", "2.1_pre20"),
  makeCase("2.1_pre20", "<", "2.1_pre26"),
  makeCase("2.1_pre26", ">", "0.2.3-r2"),
  makeCase("0.2.3-r2", ">", "0.2.2"),
  makeCase("0.2.2", "<", "2.10.0"),
  makeCase("2.10.0", "<", "2.10.1"),
  makeCase("2.10.1", ">", "02.08.01b"),
  makeCase("02.08.01b", "<", "4.77"),
  makeCase("4.77", ">", "0.17"),
  makeCase("0.17", "<", "5.1.1-r1"),
  makeCase("5.1.1-r1", "<", "5.1.1-r2"),
  makeCase("5.1.1-r2", ">", "5.1.1"),
  makeCase("5.1.1", ">", "1.2"),
  makeCase("1.2", "<", "5.1"),
  makeCase("5.1", ">", "2.02.06"),
  makeCase("2.02.06", "<", "2.02.10"),
  makeCase("2.02.10", "<", "2.8.5-r3"),
  makeCase("2.8.5-r3", "<", "2.8.6-r1"),
  makeCase("2.8.6-r1", "<", "2.8.6-r2"),
  makeCase("2.8.6-r2", ">", "2.02-r1"),
  makeCase("2.02-r1", ">", "1.5.0-r1"),
  makeCase("1.5.0-r1", ">", "1.5.0"),
  makeCase("1.5.0", ">", "0.9.2"),
  makeCase("0.9.2", "<", "8.1.2.20040524-r1"),
  makeCase("8.1.2.20040524-r1", "<", "8.1.2.20050715-r1"),
  makeCase("8.1.2.20050715-r1", "<", "20030215"),
  makeCase("20030215", ">", "3.80-r4"),
  makeCase("3.80-r4", "<", "3.81"),
  makeCase("3.81", ">", "1.6d"),
  makeCase("1.6d", ">", "1.2.07.8"),
  makeCase("1.2.07.8", "<", "1.2.12.04"),
  makeCase("1.2.12.04", "<", "1.2.12.05"),
  makeCase("1.2.12.05", "<", "1.3.3"),
  makeCase("1.3.3", "<", "2.6.4"),
  makeCase("2.6.4", ">", "2.5.2"),
  makeCase("2.5.2", "<", "2.6.1"),
  makeCase("2.6.1", ">", "2.6"),
  makeCase("2.6", "<", "6.5.1-r1"),
  makeCase("6.5.1-r1", ">", "1.1.35-r1"),
  makeCase("1.1.35-r1", "<", "1.1.35-r2"),
  makeCase("1.1.35-r2", ">", "0.9.2"),
  makeCase("0.9.2", "<", "1.07-r1"),
  makeCase("1.07-r1", "<", "1.07.5"),
  makeCase("1.07.5", ">", "1.07"),
  makeCase("1.07", "<", "1.19"),
  makeCase("1.19", "<", "2.1-r2"),
  makeCase("2.1-r2", "<", "2.2"),
  makeCase("2.2", ">", "1.0.4"),
  makeCase("1.0.4", "<", "20060811"),
  makeCase("20060811", "<", "20061003"),
  makeCase("20061003", ">", "0.1_pre20060810"),
  makeCase("0.1_pre20060810", "<", "0.1_pre20060817"),
  makeCase("0.1_pre20060817", "<", "1.0.3"),
  makeCase("1.0.3", ">", "1.0.2"),
  makeCase("1.0.2", ">", "1.0.1"),
  makeCase("1.0.1", "<", "3.2.2-r1"),
  makeCase("3.2.2-r1", "<", "3.2.2-r2"),
  makeCase("3.2.2-r2", "<", "3.3.17"),
  makeCase("3.3.17", ">", "0.59s-r11"),
  makeCase("0.59s-r11", "<", "0.65"),
  makeCase("0.65", ">", "0.2.10-r2"),
  makeCase("0.2.10-r2", "<", "2.01"),
  makeCase("2.01", "<", "3.9.10"),
  makeCase("3.9.10", ">", "1.2.18"),
  makeCase("1.2.18", "<", "1.5.11-r2"),
  makeCase("1.5.11-r2", "<", "1.5.13-r1"),
  makeCase("1.5.13-r1", ">", "1.3.12-r1"),
  makeCase("1.3.12-r1", "<", "2.0.1"),
  makeCase("2.0.1", "<", "2.0.2"),
  makeCase("2.0.2", "<", "2.0.3"),
  makeCase("2.0.3", ">", "0.2.0"),
  makeCase("0.2.0", "<", "5.5-r2"),
  makeCase("5.5-r2", "<", "5.5-r3"),
  makeCase("5.5-r3", ">", "0.25.3"),
  makeCase("0.25.3", "<", "0.26.1-r1"),
  makeCase("0.26.1-r1", "<", "5.2.1.2-r1"),
  makeCase("5.2.1.2-r1", "<", "5.4"),
  makeCase("5.4", ">", "1.60-r11"),
  makeCase("1.60-r11", "<", "1.60-r12"),
  makeCase("1.60-r12", "<", "110-r8"),
  makeCase("110-r8", ">", "0.17-r2"),
  makeCase("0.17-r2", "<", "1.05-r4"),
  makeCase("1.05-r4", "<", "5.28.0"),
  makeCase("5.28.0", ">", "0.51.6-r1"),
  makeCase("0.51.6-r1", "<", "1.0.6-r6"),
  makeCase("1.0.6-r6", ">", "0.8.3"),
  makeCase("0.8.3", "<", "1.42"),
  makeCase("1.42", "<", "20030719"),
  makeCase("20030719", ">", "4.01"),
  makeCase("4.01", "<", "4.20"),
  makeCase("4.20", ">", "0.20070118"),
  makeCase("0.20070118", "<", "0.20070207_rc1"),
  makeCase("0.20070207_rc1", "<", "1.0"),
  makeCase("1.0", "<", "1.13.0"),
  makeCase("1.13.0", "<", "1.13.1"),
  makeCase("1.13.1", ">", "0.21"),
  makeCase("0.21", ">", "0.3.7-r3"),
  makeCase("0.3.7-r3", "<", "0.4.10"),
  makeCase("0.4.10", "<", "0.5.0"),
  makeCase("0.5.0", "<", "0.5.5"),
  makeCase("0.5.5", "<", "0.5.7"),
  makeCase("0.5.7", "<", "0.6.11-r1"),
  makeCase("0.6.11-r1", "<", "2.3.30-r2"),
  makeCase("2.3.30-r2", "<", "3.7_p1"),
  makeCase("3.7_p1", ">", "1.3"),
  makeCase("1.3", ">", "0.10.1"),
  makeCase("0.10.1", "<", "4.3_p2-r1"),
  makeCase("4.3_p2-r1", "<", "4.3_p2-r5"),
  makeCase("4.3_p2-r5", "<", "4.4_p1-r6"),
  makeCase("4.4_p1-r6", "<", "4.5_p1-r1"),
  makeCase("4.5_p1-r1", ">", "4.5_p1"),
  makeCase("4.5_p1", "<", "4.5_p1-r1"),
  makeCase("4.5_p1-r1", ">", "4.5_p1"),
  makeCase("4.5_p1", ">", "0.9.8c-r1"),
  makeCase("0.9.8c-r1", "<", "0.9.8d"),
  makeCase("0.9.8d", "<", "2.4.4"),
  makeCase("2.4.4", "<", "2.4.7"),
  makeCase("2.4.7", ">", "2.0.6"),
  makeCase("2.0.6", "=", "2.0.6"),
  makeCase("2.0.6", ">", "0.78-r3"),
  makeCase("0.78-r3", ">", "0.3.2"),
  makeCase("0.3.2", "<", "1.7.1-r1"),
  makeCase("1.7.1-r1", "<", "2.5.9"),
  makeCase("2.5.9", ">", "0.1.13"),
  makeCase("0.1.13", "<", "0.1.15"),
  makeCase("0.1.15", "<", "0.4"),
  makeCase("0.4", "<", "0.9.6"),
  makeCase("0.9.6", "<", "2.2.0-r1"),
  makeCase("2.2.0-r1", "<", "2.2.3-r2"),
  makeCase("2.2.3-r2", "<", "013"),
  makeCase("013", "<", "014-r1"),
  makeCase("014-r1", ">", "1.3.1-r1"),
  makeCase("1.3.1-r1", "<", "5.8.8-r2"),
  makeCase("5.8.8-r2", ">", "5.1.6-r4"),
  makeCase("5.1.6-r4", "<", "5.1.6-r6"),
  makeCase("5.1.6-r6", "<", "5.2.1-r3"),
  makeCase("5.2.1-r3", ">", "0.11.3"),
  makeCase("0.11.3", "=", "0.11.3"),
  makeCase("0.11.3", "<", "1.10.7"),
  makeCase("1.10.7", ">", "1.7-r1"),
  makeCase("1.7-r1", ">", "0.1.20"),
  makeCase("0.1.20", "<", "0.1.23"),
  makeCase("0.1.23", "<", "5b-r9"),
  makeCase("5b-r9", ">", "2.2.10"),
  makeCase("2.2.10", "<", "2.3.6"),
  makeCase("2.3.6", "<", "8.0.12"),
  makeCase("8.0.12", ">", "2.4.3-r16"),
  makeCase("2.4.3-r16", "<", "2.4.4-r4"),
  makeCase("2.4.4-r4", "<", "3.0.3-r5"),
  makeCase("3.0.3-r5", "<", "3.0.6"),
  makeCase("3.0.6", "<", "3.2.6"),
  makeCase("3.2.6", "<", "3.2.7"),
  makeCase("3.2.7", ">", "0.3.1_rc8"),
  makeCase("0.3.1_rc8", "<", "22.2"),
  makeCase("22.2", "<", "22.3"),
  makeCase("22.3", ">", "1.2.2"),
  makeCase("1.2.2", "<", "2.04"),
  makeCase("2.04", "<", "2.4.3-r1"),
  makeCase("2.4.3-r1", "<", "2.4.3-r4"),
  makeCase("2.4.3-r4", ">", "0.98.6-r1"),
  makeCase("0.98.6-r1", "<", "5.7-r2"),
  makeCase("5.7-r2", "<", "5.7-r3"),
  makeCase("5.7-r3", ">", "5.1_p4"),
  makeCase("5.1_p4", ">", "1.0.5"),
  makeCase("1.0.5", "<", "3.6.19-r1"),
  makeCase("3.6.19-r1", ">", "3.6.19"),
  makeCase("3.6.19", ">", "1.0.1"),
  makeCase("1.0.1", "<", "3.8"),
  makeCase("3.8", ">", "0.2.3"),
  makeCase("0.2.3", "<", "1.2.15-r3"),
  makeCase("1.2.15-r3", ">", "1.2.6-r1"),
  makeCase("1.2.6-r1", "<", "2.6.8-r2"),
  makeCase("2.6.8-r2", "<", "2.6.9-r1"),
  makeCase("2.6.9-r1", ">", "1.7"),
  makeCase("1.7", "<", "1.7b"),
  makeCase("1.7b", "<", "1.8.4-r3"),
  makeCase("1.8.4-r3", "<", "1.8.5"),
  makeCase("1.8.5", "<", "1.8.5_p2"),
  makeCase("1.8.5_p2", ">", "1.1.3"),
  makeCase("1.1.3", "<", "3.0.22-r3"),
  makeCase("3.0.22-r3", "<", "3.0.24"),
  makeCase("3.0.24", "=", "3.0.24"),
  makeCase("3.0.24", "=", "3.0.24"),
  makeCase("3.0.24", "<", "4.0.2-r5"),
  makeCase("4.0.2-r5", "<", "4.0.3"),
  makeCase("4.0.3", ">", "0.98"),
  makeCase("0.98", "<", "1.00"),
  makeCase("1.00", "<", "4.1.4-r1"),
  makeCase("4.1.4-r1", "<", "4.1.5"),
  makeCase("4.1.5", ">", "2.3"),
  makeCase("2.3", "<", "2.17-r3"),
  makeCase("2.17-r3", ">", "0.1.7"),
  makeCase("0.1.7", "<", "1.11"),
  makeCase("1.11", "<", "4.2.1-r11"),
  makeCase("4.2.1-r11", ">", "3.2.3"),
  makeCase("3.2.3", "<", "3.2.4"),
  makeCase("3.2.4", "<", "3.2.8"),
  makeCase("3.2.8", "<", "3.2.9"),
  makeCase("3.2.9", ">", "3.2.3"),
  makeCase("3.2.3", "<", "3.2.4"),
  makeCase("3.2.4", "<", "3.2.8"),
  makeCase("3.2.8", "<", "3.2.9"),
  makeCase("3.2.9", ">", "1.4.9-r2"),
  makeCase("1.4.9-r2", "<", "2.9.11_pre20051101-r2"),
  makeCase("2.9.11_pre20051101-r2", "<", "2.9.11_pre20051101-r3"),
  makeCase("2.9.11_pre20051101-r3", ">", "2.9.11_pre20051101"),
  makeCase("2.9.11_pre20051101", "<", "2.9.11_pre20061021-r1"),
  makeCase("2.9.11_pre20061021-r1", "<", "2.9.11_pre20061021-r2"),
  makeCase("2.9.11_pre20061021-r2", "<", "5.36-r1"),
  makeCase("5.36-r1", ">", "1.0.1"),
  makeCase("1.0.1", "<", "7.0-r2"),
  makeCase("7.0-r2", ">", "2.4.5"),
  makeCase("2.4.5", "<", "2.6.1.2"),
  makeCase("2.6.1.2", "<", "2.6.1.3-r1"),
  makeCase("2.6.1.3-r1", ">", "2.6.1.3"),
  makeCase("2.6.1.3", "<", "2.6.1.3-r1"),
  makeCase("2.6.1.3-r1", "<", "12.17.9"),
  makeCase("12.17.9", ">", "1.1.12"),
  makeCase("1.1.12", ">", "1.1.7"),
  makeCase("1.1.7", "<", "2.5.14"),
  makeCase("2.5.14", "<", "2.6.6-r1"),
  makeCase("2.6.6-r1", "<", "2.6.7"),
  makeCase("2.6.7", "<", "2.6.9-r1"),
  makeCase("2.6.9-r1", ">", "2.6.9"),
  makeCase("2.6.9", ">", "1.39"),
  makeCase("1.39", ">", "0.9"),
  makeCase("0.9", "<", "2.61-r2"),
  makeCase("2.61-r2", "<", "4.5.14"),
  makeCase("4.09-r1", ">", "1.3.1"),
  makeCase("1.3.1", "<", "1.3.2-r3"),
  makeCase("1.3.2-r3", "<", "1.6.8_p12-r1"),
  makeCase("1.6.8_p12-r1", ">", "1.6.8_p9-r2"),
  makeCase("1.6.8_p9-r2", ">", "1.3.0-r1"),
  makeCase("1.3.0-r1", "<", "3.11"),
  makeCase("3.11", "<", "3.20"),
  makeCase("3.20", ">", "1.6.11-r1"),
  makeCase("1.6.11-r1", ">", "1.6.9"),
  makeCase("1.6.9", "<", "5.0.5-r2"),
  makeCase("5.0.5-r2", ">", "2.86-r5"),
  makeCase("2.86-r5", "<", "2.86-r6"),
  makeCase("2.86-r6", ">", "1.15.1-r1"),
  makeCase("1.15.1-r1", "<", "8.4.9"),
  makeCase("8.4.9", ">", "7.6-r8"),
  makeCase("7.6-r8", ">", "3.9.4-r2"),
  makeCase("3.9.4-r2", "<", "3.9.4-r3"),
  makeCase("3.9.4-r3", "<", "3.9.5-r2"),
  makeCase("3.9.5-r2", ">", "1.1.9"),
  makeCase("1.1.9", ">", "1.0.6"),
  makeCase("1.0.6", "<", "5.9"),
  makeCase("5.9", "<", "6.5"),
  makeCase("6.5", ">", "0.40-r1"),
  makeCase("0.40-r1", "<", "2.25b-r5"),
  makeCase("2.25b-r5", "<", "2.25b-r6"),
  makeCase("2.25b-r6", ">", "1.0.4"),
  makeCase("1.0.4", "<", "1.0.5"),
  makeCase("1.0.5", "<", "1.4_p12-r2"),
  makeCase("1.4_p12-r2", "<", "1.4_p12-r5"),
  makeCase("1.4_p12-r5", ">", "1.1"),
  makeCase("1.1", ">", "0.2.0-r1"),
  makeCase("0.2.0-r1", "<", "0.2.1"),
  makeCase("0.2.1", "<", "0.9.28-r1"),
  makeCase("0.9.28-r1", "<", "0.9.28-r2"),
  makeCase("0.9.28-r2", "<", "0.9.28.1"),
  makeCase("0.9.28.1", ">", "0.9.28"),
  makeCase("0.9.28", "<", "0.9.28.1"),
  makeCase("0.9.28.1", "<", "087-r1"),
  makeCase("087-r1", "<", "103"),
  makeCase("103", "<", "104-r11"),
  makeCase("104-r11", ">", "104-r9"),
  makeCase("104-r9", ">", "1.23-r1"),
  makeCase("1.23-r1", ">", "1.23"),
  makeCase("1.23", "<", "1.23-r1"),
  makeCase("1.23-r1", ">", "1.0.2"),
  makeCase("1.0.2", "<", "5.52-r1"),
  makeCase("5.52-r1", ">", "1.2.5_rc2"),
  makeCase("1.2.5_rc2", ">", "0.1"),
  makeCase("0.1", "<", "0.71-r1"),
  makeCase("0.71-r1", "<", "20040406-r1"),
  makeCase("20040406-r1", ">", "2.12r-r4"),
  makeCase("2.12r-r4", "<", "2.12r-r5"),
  makeCase("2.12r-r5", ">", "0.0.7"),
  makeCase("0.0.7", "<", "1.0.3"),
  makeCase("1.0.3", "<", "1.8"),
  makeCase("1.8", "<", "7.0.17"),
  makeCase("7.0.17", "<", "7.0.174"),
  makeCase("7.0.174", ">", "7.0.17"),
  makeCase("7.0.17", "<", "7.0.174"),
  makeCase("7.0.174", ">", "1.0.1"),
  makeCase("1.0.1", "<", "1.1.1-r3"),
  makeCase("1.1.1-r3", ">", "0.3.4_pre20061029"),
  makeCase("0.3.4_pre20061029", "<", "0.4.0"),
  makeCase("0.4.0", ">", "0.1.2"),
  makeCase("0.1.2", "<", "1.10.2"),
  makeCase("1.10.2", "<", "2.16"),
  makeCase("2.16", "<", "28"),
  makeCase("28", ">", "0.99.4"),
  makeCase("0.99.4", "<", "1.13"),
  makeCase("1.13", ">", "1.0.1"),
  makeCase("1.0.1", "<", "1.1.2-r2"),
  makeCase("1.1.2-r2", ">", "1.1.0"),
  makeCase("1.1.0", "<", "1.1.1"),
  makeCase("1.1.1", "=", "1.1.1"),
  makeCase("1.1.1", ">", "0.6.0"),
  makeCase("0.6.0", "<", "6.6.3"),
  makeCase("6.6.3", ">", "1.1.1"),
  makeCase("1.1.1", ">", "1.1.0"),
  makeCase("1.1.0", "=", "1.1.0"),
  makeCase("1.1.0", ">", "0.2.0"),
  makeCase("0.2.0", "<", "0.3.0"),
  makeCase("0.3.0", "<", "1.1.1"),
  makeCase("1.1.1", "<", "1.2.0"),
  makeCase("1.2.0", ">", "1.1.0"),
  makeCase("1.1.0", "<", "1.6.5"),
  makeCase("1.6.5", ">", "1.1.0"),
  makeCase("1.1.0", "<", "1.4.2"),
  makeCase("1.4.2", ">", "1.1.1"),
  makeCase("1.1.1", "<", "2.8.1"),
  makeCase("2.8.1", ">", "1.2.0"),
  makeCase("1.2.0", "<", "4.1.0"),
  makeCase("4.1.0", ">", "0.4.1"),
  makeCase("0.4.1", "<", "1.9.1"),
  makeCase("1.9.1", "<", "2.1.1"),
  makeCase("2.1.1", ">", "1.4.1"),
  makeCase("1.4.1", ">", "0.9.1-r1"),
  makeCase("0.9.1-r1", ">", "0.8.1"),
  makeCase("0.8.1", "<", "1.2.1-r1"),
  makeCase("1.2.1-r1", ">", "1.1.0"),
  makeCase("1.1.0", "<", "1.2.1"),
  makeCase("1.2.1", ">", "1.1.0"),
  makeCase("1.1.0", ">", "0.1.1"),
  makeCase("0.1.1", "<", "1.2.1"),
  makeCase("1.2.1", "<", "4.1.0"),
  makeCase("4.1.0", ">", "0.2.1-r1"),
  makeCase("0.2.1-r1", "<", "1.1.0"),
  makeCase("1.1.0", "<", "2.7.11"),
  makeCase("2.7.11", ">", "1.0.2-r6"),
  makeCase("1.0.2-r6", ">", "1.0.2"),
  makeCase("1.0.2", ">", "0.8"),
  makeCase("0.8", "<", "1.1.1-r4"),
  makeCase("1.1.1-r4", "<", "222"),
  makeCase("222", ">", "1.0.1"),
  makeCase("1.0.1", "<", "1.2.12-r1"),
  makeCase("1.2.12-r1", ">", "1.2.8"),
  makeCase("1.2.8", "<", "1.2.9.1-r1"),
  makeCase("1.2.9.1-r1", ">", "1.2.9.1"),
  makeCase("1.2.9.1", "<", "2.31-r1"),
  makeCase("2.31-r1", ">", "2.31"),
  makeCase("2.31", ">", "1.2.3-r1"),
  makeCase("1.2.3-r1", ">", "1.2.3"),
  makeCase("1.2.3", "<", "4.2.5"),
  makeCase("4.2.5", "<", "4.3.2-r2"),
  makeCase("1.3-r0", "<", "1.3.1-r0"),
  makeCase("1.3_pre1-r1", "<", "1.3.2"),
  makeCase("1.0_p10-r0", ">", "1.0_p9-r0"),
  makeCase("0.1.0_alpha_pre2", "<", "0.1.0_alpha"),
];
